<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Map with Data Points</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>

    <script>
        // Your JSON data
        Promise.all([d3.json('geo.json')]).then(function (loadData) {

            var jsonData = loadData[0];
            console.log(jsonData);
            // Your latitude and longitude data points
            const dataPoints = [
                { "name": "Point 1", "coordinates": [108.4, 30.9] },
                { "name": "Point 2", "coordinates": [108.45, 30.75] },
                // Add more data points as needed
            ];

            // Set up the SVG container
            const width = 800;
            const height = 600;
            const svg = d3.select('body').append('svg')
                .attr('width', width)
                .attr('height', height);

            // Create a projection
            const projection = d3.geoMercator()
                .center(jsonData.features[0].properties.center)
                .translate([width / 2, height / 2])
                .scale(5000); // You may need to adjust the scale

            // Create a path generator
            const path = d3.geoPath().projection(projection);

            const zoom = d3.zoom()
                .scaleExtent([1, 8])
                .on('zoom', zoomed);

            // Apply zoom behavior to the SVG
            svg.call(zoom);

            // Draw the map
            svg.selectAll('path')
                .data(jsonData.features)
                .enter().append('path')
                .attr('d', path)
                .attr('fill', 'steelblue'); // You can customize the fill color

            // Add data points
            svg.selectAll('circle')
                .data(dataPoints)
                .enter().append('circle')
                .attr('cx', d => projection(d.coordinates)[0])
                .attr('cy', d => projection(d.coordinates)[1])
                .attr('r', 5) // Radius of the circle
                .attr('fill', 'red'); // You can customize the fill color

            function zoomed() {
                svg.selectAll('path')
                    .attr('transform', d3.event.transform);
                svg.selectAll('circle')
                    .attr('transform', d3.event.transform);
            }
        });
    </script>

</body>

</html>