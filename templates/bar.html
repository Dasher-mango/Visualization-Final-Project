<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bar Plot with D3.js</title>
  <!-- D3.js library -->
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <style>
    /* Style for the container div */
    #plot-container {
      width: 430px;
      height: 300px;
    }

    .tooltip {
        position: absolute;
        padding: 7px;
        font-size: 0.9em;
        pointer-events: none;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;

        /* 添加阴影效果 */
        -moz-box-shadow:    3px 3px 10px 0px rgba(0, 0, 0, 0.25);
        -webkit-box-shadow: 3px 3px 10px 0px rgba(0, 0, 0, 0.25);
        box-shadow:         3px 3px 10px 0px rgba(0, 0, 0, 0.25);
    }

  </style>
</head>
<body>

<!-- Container div for the plot -->
<div id="plot-container"></div>
<div class="tooltip" id="tooltip"></div>

<script>
  // Sample data for the bar plot
  var data = [10, 25, 15, 30, 20, 35, 27];
  var categories = ['Category 1', 'Category 2', 'Category 3', 'Category 4', 'Category 5', 'Category 6', 'Category 7'];

  // Set up the SVG container
  var svg = d3.select("#plot-container")
            .append("svg")
            .attr("width", 430)
            .attr("height", 300);

  // Set up the scales
  var xScale = d3.scaleBand()
            .domain(categories)
            .range([0, 430])
            .padding(0.1);

  var yScale = d3.scaleLinear()
                 .domain([0, d3.max(data)])
                 .range([300, 0]);

  // Draw the bars
  svg.selectAll("rect")
     .data(data)
     .enter().append("rect")
     .attr("x", function(d, i) { return xScale(categories[i]); })
     .attr("y", function(d) { return yScale(d); })
     .attr("width", xScale.bandwidth())
     .attr("height", function(d) { return 300 - yScale(d); })
     .attr("fill", "steelblue")
     .on("mouseover", function(d, i) {
        // Show tooltip on mouseover
        d3.select("#tooltip")
          .html("Category: " + categories[i] + "<br/>Value: " + d)
          .style("left", (d3.event.pageX + 10) + "px")
          .style("top", (d3.event.pageY - 15) + "px")
          .style("display", "block");
     })
     .on("mouseout", function() {
        // Hide tooltip on mouseout
        d3.select("#tooltip").style("display", "none");
     });

  // Add x-axis
  svg.append("g")
     .attr("transform", "translate(0, 300)")
     .call(d3.axisBottom(xScale));

  // Add y-axis
  svg.append("g")
     .call(d3.axisLeft(yScale));

  // Add axis labels
  svg.append("text")
     .attr("transform", "translate(215, 15)")
     .style("text-anchor", "middle")
     .text("Age");

  svg.append("text")
     .attr("transform", "rotate(-90)")
     .attr("y", 0 - 40)
     .attr("x", 0 - 150)
     .attr("dy", "1em")
     .style("text-anchor", "middle")
     .text("Y-Axis Label");
</script>

</body>
</html>
